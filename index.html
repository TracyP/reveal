<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reveal</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f0f0f0; }
    #game { margin-top: 50px; }
    #word { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
    .tile {
      width: 40px; height: 40px;
      display: flex; align-items: center; justify-content: center;
      background: #ddd;
      font-size: 1.5em;
      font-weight: bold;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      text-transform: uppercase;
    }
    .tile.correct { background: #4caf50; color: white; }
    .tile.hint { background: #aaa; color: white; }
    .keyboard { display: flex; flex-wrap: wrap; justify-content: center; max-width: 600px; margin: auto; }
    .key {
      width: 40px; height: 40px; margin: 5px; border: none;
      background: #ddd; font-size: 1em; cursor: pointer; border-radius: 4px;
    }
    .key.correct { background: #4caf50; color: white; }
    .key.wrong { background: #f44336; color: white; }
    #summary { margin-top: 30px; font-weight: bold; }
    #share { margin-top: 10px; cursor: pointer; color: #007BFF; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Reveal</h1>
  <div id="game">
    <div id="word"></div>
    <div class="keyboard" id="keyboard"></div>
    <div id="summary"></div>
    <div id="share" onclick="shareResult()"></div>
  </div>
  <script>
    const words = ["planet","dragon","customs","fossils","magenta","journey","kingdom"];
    const epoch = new Date("2024-01-01T00:00:00Z");
    const dayIndex = Math.floor((Date.now() - epoch.getTime()) / 86400000);
    const word = words[dayIndex % words.length].toUpperCase();
    let display = Array(word.length).fill({ char: "_", state: "" });
    let correctCount = 0, hintCount = 0;
    const guessed = new Set();
    const startTime = Date.now();
    const wordDiv = document.getElementById("word");
    const keyboardDiv = document.getElementById("keyboard");
    const summaryDiv = document.getElementById("summary");
    const shareDiv = document.getElementById("share");function updateDisplay() {
  wordDiv.innerHTML = "";
  for (let tile of display) {
    const span = document.createElement("div");
    span.className = "tile" + (tile.state ? ` ${tile.state}` : "");
    span.textContent = tile.char;
    wordDiv.appendChild(span);
  }
}

function revealHint() {
  for (let i = 0; i < word.length; i++) {
    if (display[i].char === "_") {
      const ch = word[i];
      for (let j = 0; j < word.length; j++) {
        if (word[j] === ch && display[j].char === "_") {
          display[j] = { char: ch.toLowerCase(), state: "hint" };
          hintCount++;
        }
      }
      break;
    }
  }
}

function guess(letter, btn) {
  if (guessed.has(letter)) return;
  guessed.add(letter);

  if (word.includes(letter)) {
    for (let i = 0; i < word.length; i++) {
      if (word[i] === letter && display[i].char === "_") {
        display[i] = { char: letter, state: "correct" };
        correctCount++;
      }
    }
    btn.classList.add("correct");
  } else {
    btn.classList.add("wrong");
    revealHint();
  }

  updateDisplay();

  if (!display.some(d => d.char === "_")) {
    const duration = Math.floor((Date.now() - startTime) / 1000);
    const m = Math.floor(duration / 60), s = duration % 60;
    const t = `${m}m${s.toString().padStart(2, '0')}s`;
    summaryDiv.innerText = `You got ${correctCount} correct letters, ${hintCount} hints, in ${t}.`;
    shareDiv.innerText = `Copy: Reveal #${dayIndex} â€“ ${correctCount} correct letters, ${hintCount} hints, ${t}`;
  }
}

function shareResult() {
  navigator.clipboard.writeText(shareDiv.innerText.replace("Copy: ", ""));
  shareDiv.innerText = "Copied to clipboard!";
}

for (let ch of "ABCDEFGHIJKLMNOPQRSTUVWXYZ") {
  let btn = document.createElement("button");
  btn.innerText = ch; btn.className = "key";
  btn.onclick = () => guess(ch, btn);
  keyboardDiv.appendChild(btn);
}

updateDisplay();

  </script>
</body>
</html>
